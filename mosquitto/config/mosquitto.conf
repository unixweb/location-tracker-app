# Mosquitto Configuration für Location Tracker

# Listener auf allen Interfaces
listener 1883
protocol mqtt

# WebSocket Listener (optional)
listener 9001
protocol websockets

# Persistenz
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type error
log_type warning
log_type notice
log_type information
log_timestamp true

# Authentifizierung
# Startet initially mit anonymous access, wird durch Sync konfiguriert
allow_anonymous true
# password_file /mosquitto/config/password.txt

# Access Control List
# acl_file /mosquitto/config/acl.txt

# Connection Settings
max_connections -1

# QoS 1/2 Settings - optimiert für GPS Tracking
max_inflight_messages 100        # Erhöht von 20 - mehr parallele QoS 1/2 Messages
max_queued_messages 10000        # Erhöht von 1000 - größerer Buffer bei Offline-Clients
max_queued_bytes 0               # 0 = unlimited

# QoS 0 Settings
upgrade_outgoing_qos false       # Respektiere Client QoS Level

# Retain Messages
retain_available true
